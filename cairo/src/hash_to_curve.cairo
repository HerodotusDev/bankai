%builtins range_check bitwise range_check96 add_mod mul_mod

from starkware.cairo.common.cairo_builtins import BitwiseBuiltin, ModBuiltin
from starkware.cairo.common.alloc import alloc
from starkware.cairo.common.uint256 import Uint256

from cairo.src.utils import pow2alloc128
from hash_to_curve import hash_to_curve
from sha import SHA256

func main{
    range_check_ptr,
    bitwise_ptr: BitwiseBuiltin*,
    range_check96_ptr: felt*,
    add_mod_ptr: ModBuiltin*,
    mul_mod_ptr: ModBuiltin*,
}() {
    alloc_locals;

    let (pow2_array) = pow2alloc128();
    let (sha256_ptr, sha256_ptr_start) = SHA256.init();
    let value = Uint256(
        low=0x135aa063454c6023e1fbafd896f89df9, high=0x18b90e7987b9393d878786da78fa13fd
    );

    with pow2_array, sha256_ptr {
        hash_to_curve(1, value);
    }

    return ();
}

// U [
//   [
//     1556800727266659224486307223710983989761661593776178353933175239605467918853638579207638742450628877266610077644019n,
//     2231413721970278425038638834062370180699174210864795385441649994565282274875534254514118105433862522641883533654145n
//   ],
//   [
//     3741944764571472160006322193608041966151877622471123223277469611910821820061028054244113212685535996904839352799402n,
//     2076377621229436486953902801269393160218977179950230047408992877427440885760409779221205731516804245080380194857867n
//   ]
// ]

// x0 Fp2 {
//   c0: Fp {
//     value: 2843075373688611471290556504186176053275483247291128525980163517764803526616259371130035811825227707920936817728741n
//   },
//   c1: Fp {
//     value: 3661712616179456093275454398202160102594067191736010383603184812959944211042529505618295008186663134429283699505891n
//   }
// }
// y0 Fp2 {
//   c0: Fp {
//     value: 2229899020770589661585214900480830515873415727829711460134445858387853696109925143060238999266818473086058450471795n
//   },
//   c1: Fp {
//     value: 3127664777588830509127251096086955764006894160737524705993294599144750103128110100147816255502757346871240956727581n
//   }
// }